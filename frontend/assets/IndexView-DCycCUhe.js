var w=Object.defineProperty;var _=(o,e,t)=>e in o?w(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var d=(o,e,t)=>_(o,typeof e!="symbol"?e+"":e,t);import{d as b,c as u,a as i,w as p,u as a,t as h,y as x,o as f,I as y,b as C,f as B,j as k,_ as v}from"./index-C-5Ijqs0.js";import{C as E}from"./ComponentButton-DtgHXXqF.js";import{C as I}from"./ComponentCard-KN3mc77x.js";import{_ as g}from"./ComponentInput.vue_vue_type_script_setup_true_lang-BO31PmJS.js";import{e as V,s as P}from"./index-CdHm6dqN.js";import{s as M}from"./index-UK8MnnpS.js";import"./index-_N8SQgRr.js";class ${constructor(...e){d(this,"fields",{});e.forEach(({fieldName:t,rule:n,errorMessage:r})=>{this.fields[t]=this.fields[t]||[],this.fields[t].push({rule:n,errorMessage:r,fieldName:t})})}getValueByPath(e,t){return t.replace(/\[(\d+)]/g,".$1").split(".").reduce((r,s)=>r==null?void 0:r[s],e)}validate(e){return Object.entries(this.fields).reduce((t,[n,r])=>{const s=this.getValueByPath(e,n),l=r.filter(({rule:m})=>!m(s)).map(({errorMessage:m})=>m);return l.length&&(t[n]=l),t},{})}}function j(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}function c(o,e){return o.length>=e}const N={key:0},S=b({__name:"IndexView",setup(o){const e=M(),t=new $({fieldName:"email",rule:j,errorMessage:"Электронная почта должна быть валидной"},{fieldName:"email",rule:r=>c(r,5),errorMessage:"Электронная почта должна содержать не менее 5 символов"},{fieldName:"password",rule:r=>c(r,5),errorMessage:"Пароль должен содержать не менее 5 символов"}),n=()=>{const r=t.validate(e.element);if(Object.keys(r).length!==0){P(r);return}e.signin()};return(r,s)=>(f(),u("main",null,[i(y),i(I,{tag:"section"},{default:p(()=>[C("form",{onSubmit:s[3]||(s[3]=k(()=>{},["prevent"]))},[i(g,{label:"Электронная почта",type:"email",required:"email",modelValue:a(e).element.email,"onUpdate:modelValue":s[0]||(s[0]=l=>a(e).element.email=l)},null,8,["modelValue"]),i(g,{label:"Пароль",type:"password",required:"password",modelValue:a(e).element.password,"onUpdate:modelValue":s[1]||(s[1]=l=>a(e).element.password=l)},null,8,["modelValue"]),i(E,{disabled:!a(e).element.password||!a(e).element.email,onClick:s[2]||(s[2]=l=>n())},{default:p(()=>s[4]||(s[4]=[B("Войти")])),_:1},8,["disabled"])],32)]),_:1}),a(V).error?(f(),u("span",N,h(a(V).error),1)):x("",!0)]))}}),A=v(S,[["__scopeId","data-v-a0f16e37"]]);export{A as default};
